<!DOCTYPE html>
<html>
  <head>
       <link rel="stylesheet" type="text/css" href="framework7/css/framework7.material.min.css" class="uib-framework-theme">
        
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
      <script src="https://cdn.firebase.com/js/client/2.4.2/firebase.js"></script>
      <script type="text/javascript">
<!-- hide from old browsers

function getValue(varname)
{
  // First, we load the URL into a variable
  var url = window.location.href;

  // Next, split the url by the ?
  var qparts = url.split("?");

  // Check that there is a querystring, return "" if not
  if (qparts.length == 0)
  {
    return "";
  }

  // Then find the querystring, everything after the ?
  var query = qparts[1];

  // Split the query string into variables (separates by &s)
  var vars = query.split("&");

  // Initialize the value with "" as default
  var value = "";

  // Iterate through vars, checking each one for varname
  for (i=0;i<vars.length;i++)
  {
    // Split the variable by =, which splits name and value
    var parts = vars[i].split("=");
    
    // Check if the correct variable
    if (parts[0] == varname)
    {
      // Load value into variable
      value = parts[1];

      // End the loop
      break;
    }
  }
  
  // Convert escape code
  value = unescape(value);

  // Convert "+"s to " "s
 // value.replace(/\+/g," ");

  // Return the value
  return value;
}

// end hide -->
</script>
      <script>
          var point = getValue("names");
          var type = getValue("type");
          var price = getValue("address");
           var longitude = getValue("long");
           var latitude= getValue("lat"); 
         if(point !==null){
            // alert("Not empty name");
                      
        //alert("auth");
     var messageListRef = new Firebase("https://amhungry.firebaseio.com/");
    messageListRef.authWithPassword({
      email    :localStorage.authemail,


      password : localStorage.authpassword
    }, function(error, authData) {
      if (error) {
        switch (error.code) {
          case "INVALID_EMAIL":
            console.log("The specified user account email is invalid.");
            break;
          case "INVALID_PASSWORD": 
            console.log("The specified user account password is incorrect.");
            break;
          case "INVALID_USER":
            console.log("The specified user account does not exist.");
            break;
          default:
            console.log("Error logging user in:", error);
        }
      } else {
        console.log("Authenticated successfully with payload:", authData);
         // alert("Auth Successful");
		    var usersRef = messageListRef.child("points");
            usersRef.push({
           name: point,
           type: type,
		   latitude: latitude,
           longitude: longitude,
		   price:price
          
    });
		alert("Point Saved Successfully");
	 }
    });
             
         }
       
      </script>
      <script>
 
  

</script>
    </head>
    <body><style>
        .back{
            border: thick;
            background-color: black;
            color: white;
            display: block;
            height: 70px;
            width: 200px;
            font-weight: bolder;
            font-family: fantasy;
            font-size:  20px;
            
        }
        
        </style>
        <center>
        <a href="supermarkets.html" class="back">Add More</a>
    </center>
    
    </body>
</html>