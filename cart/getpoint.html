<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
 <script src="https://cdn.firebase.com/js/client/2.4.2/firebase.js"></script>
    
     <script>
          var suplat;
          var suplong;


   function grabThe(){
      var ref = new Firebase("https://amhungry.firebaseio.com/points/");
ref.orderByChild("name").equalTo(localStorage.supermarket).on("child_added", function(snapshot, prevChildKey) {
  var newPost = snapshot.val();
  console.log("Supermarket name: " + newPost.name);
  console.log("latitude: " + newPost.latitude);
console.log("longitude: " + newPost.longitude);
    //suplat=newPost.latitude;
    //suplong=newpost.longitude;
  //  alert("Supermarket latitude"+newPost.latitude);
    //localStorage.suplat=suplat;
    //localStorage.suplong=suplong;
 console.log("Grabbed details are"+newPost.latitude);
 DelayRedirect();
 });

   }


   function DelayRedirect() {
    var seconds = 2;
    var dvCountDown = document.getElementById("dvCountDown");
    var lblCount = document.getElementById("lblCount");
    dvCountDown.style.display = "block";
    lblCount.innerHTML = seconds;
    setInterval(function () {
        seconds--;
        lblCount.innerHTML = seconds;
        if (seconds == 0) {
            dvCountDown.style.display = "none";
            window.location = "bodabillsup.html";
        }
    }, 1000);
}
          </script>
    </head>
    
    <body onload="grabThe();" style="background-image:url(../img/back.jpg);">
    <script>
    function whatThere(){

        //alert("auth");
     var messageListRef = new Firebase("https://amhungry.firebaseio.com/points/");
    messageListRef.authWithPassword({
      email    :localStorage.authemail,


      password : localStorage.authpassword
    }, function(error, authData) {
      if (error) {
        switch (error.code) {
          case "INVALID_EMAIL":
            console.log("The specified user account email is invalid.");
            break;
          case "INVALID_PASSWORD": 
            console.log("The specified user account password is incorrect.");
            break;
          case "INVALID_USER":
            console.log("The specified user account does not exist.");
            break;
          default:
            console.log("Error logging user in:", error);
        }
      } else {
        console.log("Authenticated successfully with payload:", authData);
         // alert("Auth Successful");
            var URL="bodabillsup.html";
        //var ref = new Firebase("https://amhungry.firebaseio.com/points/");

 getWhats();
   }
    });
       
     

}



   

function getWhats(){
  alert("getting there");
  var messageListRef = new Firebase("https://amhungry.firebaseio.com/points/");
 messageListRef.orderByChild("name").equalTo(localStorage.supermarket).on("child_added", function(snapshot, prevChildKey) {
  var newPost = snapshot.val();
  console.log("Supermarket name: " + newPost.name);
  console.log("latitude: " + newPost.latitude);
    localStorage.pointlat=newPost.latitude;
    localStorage.pointlong=newPost.longitude;
// alert("longitude: " + newPost.longitude);
    //suplat=newPost.latitude;
    //suplong=newpost.longitude;
  //  alert("Supermarket latitude"+newPost.latitude);
    //localStorage.suplat=suplat;
    //localStorage.suplong=suplong;
 console.log("Grabbed details are"+newPost.latitude);
 if(localStorage.pointlat!=null){

 }
 window.location.assign("bodabillsup.html");
 //var URL= "bodabillsup.html";
      //var delay = 5000; //Your delay in milliseconds
//setTimeout(function(){ window.location = URL; }, delay);
 
 }); 

}
     </script>
         <script type="text/javascript">

</script>
      <center><img src="../img/piss.png" width="120px" height="120px"><br>
      <div id="dvCountDown" style = "display:none">
    
You will be redirected after <span id = "lblCount"></span>&nbsp;seconds.</center>
</div>
<p>You Will Be Redirected After Details Are Gathered</p>

<center> <marquee>&copy All Rights Reserved Boda Fix Uganda</marquee></center>
    </body>


</html>